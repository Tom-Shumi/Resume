# ラジオ配信アプリ開発プロジェクト

## 役割

- エンジニアリーダー

## 使用技術

- Kotlin
- Spring Boot
- Redis
- Linux
- Gradle
- Docker
- API
- MyBatis
- JIRA
- MySQL
- SQL

## プロジェクト期間

- 3 ヶ月

## 開発手法

- アジャイル（スクラム）

## プロジェクト概要

某大手 SNS 企業がリリースする予定だったラジオ（トーク）配信アプリのバックエンド開発に立ち上げから参画しました。
ラジオ版の YouTube がテーマになっており、配信者が自由に自身のラジオを配信できるサービスです。

開発が始まって 2 ヶ月が経過した頃、他社から「Clubhouse」がリリースされたため、差別化が図れず途中でプロジェクトは凍結となりました。

## 担当

上記の開発案件のバックエンドエンジニアとして API 開発を行なっていました。
工程としては、設計〜UT を担当しており、DB の論理設計も行いました。

## DB 論理設計

要件定義書や画面イメージ等をインプットに、テーブル名・カラム名・カラムの型・主キーやインデックス等を設計し、ER 図も作成しました。 テーブル数は、アプリケーション全体で 30 個ほどになりました。

論理設計をする際は正規化を意識して、同じ情報を複数のテーブルで保持しない様にすることはもちろんのこと、「性能を良くするため」や「ログ管理のため」にあえて正規化をしないなど、実装を意識したテーブル設計を行いました。

またわかりやすく、正しい意図で伝わるように具体的で統一感のあるカラム名・テーブル名を意識し命名しました。

- id や flg、status が何を指しているのか明確にする。
- プレフィックスをつけてカテゴライズし、用途をわかりやすくする。
- 「その他」カラムなどを使わない。

## API 開発

本開発で私はシンプルな REST API の CRUD を始め、Home 画面で表示する情報を取得する API も実装しました。
Home 画面の API は下記のような仕様で性能も求められていました。

**仕様：複数のテーブルからランダムでレコードを取得し(Home 画面で毎回同じ情報を表示させないため)、取得した複数のリストを一つ一つ交互に追加して行き、一つのリストにして返却する**

まずテーブルからランダムでレコードを取得する SQL ですが、RAND()関数を使うだけだと性能が悪く、時間がかかってしまったため、レコードの主キーだけをランダムに取得してから、テーブル本体と結合することにより性能を良くしました。  
またループの回数やループの中での処理が少なくなるように処理の順番を意識し、DB 接続の N + 1 問題を回避するためにテーブルを JOIN して必要な情報は一度に取得しておく等の対応を行いました。

上記の対応を行なった結果、API で求められていた性能目標をクリアする事ができました。
